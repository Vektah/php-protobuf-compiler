<?php

{% if namespace %}
namespace {{ namespace }};

{% endif %}
{% for use in uses %}
use {{ use }};
{% endfor %}

/**
 * THIS IS A GENERATED CLASS. DO NOT EDIT.
 *
 * generated from {{ sourceFilename }}
 *
{% for field in message.fields %}
 * @property {{ field.phpType }} ${{ field.identifier }}
{% endfor %}
 */
class {{ message.name }} extends {{ base.name }}
{
    /** @return array This is passed off to the base ProtobufMessage class in getFields. */
    protected static function buildFields()
    {
        $data = [
{% for field in message.fields %}
            {{ field.index }} => [
                'name' => '{{ field.identifier }}',
                'type' => {{ field.allegroType }},
{% if field.repeated %}
                'repeated' => {{ field.repeated }},
{% else %}
                'required' => {{ field.required }},
{% endif %}
{% if field.default %}
                'default' => {{ field.default }},
{% endif %}
            ],
{% endfor %}
        ];

{% if base %}
        return array_merge(parent::buildFields(), $data);
{% else %}
        return $data;
{% endif %}
    }

    const _CLASS = __CLASS__;
}
